# HTML 測試報告規格

> 本文件說明 `generate_report.py` 輸出的 HTML 報告結構與設計規範。

---

## 一、報告結構（由上至下）

```
┌─────────────────────────────────────────────┐
│  HEADER                                     │
│  • Suite 名稱                               │
│  • Base URL / 環境 / 執行時間              │
│  • 「列印 / 儲存 PDF」按鈕                 │
├─────────────────────────────────────────────┤
│  SUMMARY STATS  [總案例] [✅通過] [❌失敗]  │
│                 [⏭略過]  [⏱耗時]           │
├─────────────────────────────────────────────┤
│  PASS-RATE BAR  ████████░░ 80%              │
├─────────────────────────────────────────────┤
│  FAIL SUMMARY（僅在有失敗時顯示）           │
│  • TC-002 — 密碼錯誤登入失敗               │
├─────────────────────────────────────────────┤
│  ENVIRONMENT CARD                           │
│  Base URL / 環境 / 測試人員 / 日期          │
├─────────────────────────────────────────────┤
│  TEST CASE CARDS（可展開/收合）             │
│  ┌──────────────────────────────────────┐  │
│  │ ✅ PASS  TC-001  使用者登入  8.1s  ▶│  │
│  │  （點擊展開）                         │  │
│  │  Steps table:                         │  │
│  │  # | 動作  | 對象    | 截圖           │  │
│  │  1 | goto  | /login  | 📷 截圖       │  │
│  │  ...                                  │  │
│  │  🎥 測試錄影（若有）                  │  │
│  └──────────────────────────────────────┘  │
│  ┌──────────────────────────────────────┐  │
│  │ ❌ FAIL  TC-002  密碼錯誤  3.2s  ▼  │  │  ← 失敗案例自動展開
│  │  ⚠ Error: Expected '/dashboard'     │  │
│  │  Steps table...                       │  │
│  └──────────────────────────────────────┘  │
└─────────────────────────────────────────────┘
```

---

## 二、色彩系統

| 狀態 | 文字色 | 背景色 | Hex |
|------|-------|-------|-----|
| PASS | 綠色 | 淡綠 | `#16A34A` / `#DCF2E4` |
| FAIL | 紅色 | 淡紅 | `#DC2626` / `#FEE2E2` |
| SKIP | 灰色 | 淡灰 | `#9CA3AF` / `#F3F4F6` |
| Header BG | — | 深藍黑 | `#1A1A2E` |
| Page BG | — | 淡灰 | `#F5F6FA` |

---

## 三、截圖 Lightbox 行為

- 點擊步驟列的「📷 截圖」連結 → 全螢幕 lightbox 顯示原尺寸截圖
- 點擊暗色遮罩或 ✕ 按鈕關閉
- 按 `Escape` 鍵關閉
- 截圖以 base64 data-URI inline 嵌入，無需外部檔案

---

## 四、錄影播放

- 若 `run_tests.py` 以 `--video` 旗標執行，每個測試案例有對應 `.webm` 檔
- 報告使用 HTML5 `<video>` 元素，`src` 指向本機路徑（absolute URI）
- 注意：分享報告時錄影需一併提供；截圖則已 inline 嵌入

---

## 五、列印 / PDF 輸出

### 方法
1. 在瀏覽器開啟 `report.html`
2. 點擊右上角「🖨 列印 / 儲存 PDF」
3. 選擇「另存為 PDF」

### 列印優化（CSS `@media print`）
- 隱藏 lightbox 和列印按鈕
- 所有測試案例卡片自動展開
- 無陰影、加邊框
- `page-break-inside: avoid` 避免案例卡片跨頁斷裂

---

## 六、無障礙 / 可讀性

- 使用系統預設 sans-serif 字體堆疊（避免外部字型相依）
- 色彩對比符合 WCAG AA
- 所有截圖包含 `alt` 屬性
- 完全無外部 CDN 相依（離線可用）

---

## 七、自訂主題

若需調整報告外觀，修改 `generate_report.py` 中的 `HTML_TEMPLATE` 常數：

```python
# 修改 Header 背景色
.header { background: #1a1a2e; ... }

# 修改通過率顏色
.pass-bar .fill { background: linear-gradient(90deg, #16a34a, #4ade80); }

# 新增 logo
<div class="header">
  <img src="data:..." style="height:40px; margin-right:16px"/>
  ...
```
