# 自動化驗收測試撰寫與執行 SOP

這份標準作業程序（SOP）旨在指導 PM（專案經理）與 SA（系統分析師）如何撰寫自動化測試案例，並透過 AI Agent 自動生成測試驗收報告。本 SOP 參考 `Test/AutoTestReport_v1_1.md` 範例制定。

## [階段一] 任務目標與範圍
- **任務目標**：標準化自動化測試案例的撰寫格式，確保 AI Agent 能夠準確解讀步驟，執行無偏差的瀏覽器操作與截圖，並產出一致性高的測試報告。
- **執行角色**：
  - **PM / SA**：負責撰寫測試案例 Markdown 文件，定義測試路徑與預期結果。
  - **QA / 執行者**：負責呼叫 AI 執行測試，並檢視產出的 HTML 報告。
- **涵蓋範圍**：撰寫測試案例文件、觸發 AI 測試、檢視報告結果的三大標準流程。

## [執行步驟] 詳細執行步驟

### 💡 核心觀念：專案結構配置
在開始之前，請了解本專案對非工程人員來說，主要只分為兩個工作區塊：
1. **輸入區 (`Test/`)**：所有您寫好的測試劇本文件都放在這。
2. **輸出區 (`reports/`)**：所有 AI 測完產生的報告都在這。
（其餘以 `.` 開頭的隱藏資料夾屬工程封裝套件，可直接忽略）

---

### 步驟 1：建立測試案例文件
請在 `Test/` 資料夾下建立一份新的 `.md` 檔案，並嚴格遵循以下三大標題結構：

1. **`[階段一] 任務目標與範圍`**
   - 條列 **測試目標** 與 **測試範圍**。
   - 將 **測試環境與變數設定** 結構化，例如：
     ```markdown
     - **前台網站 URL**：`https://example.com/`
     - **測試帳號**：`tester01`
     - **測試密碼**：`password123`
     ```
   - 這是為了讓 AI 清楚知道系統入口與所需憑證。

2. **`[執行步驟] 詳細執行步驟`**
   - 使用數字編號列出每一次的情境，並將具體的「動作」條列化。
   - 善用 **粗體字** 強調關鍵按鈕、輸入框名稱或狀態。
   - **必填項目**：請在需要截圖的段落標明 `自動化紀錄點`。
   - 範例：
     ```markdown
     1. **[步驟 1] 執行登入流程**
        - **動作**：進入前台網址 `https://example.com/`。
        - **動作**：點選右上角的「登入」按鈕。
        - **動作**：輸入測試環境設定的帳號與密碼。
        - **動作**：點擊確認登入，確保網頁進入已登入狀態。
        - **自動化紀錄點**：輸入表單前、登入成功後的畫面截圖。
     ```

3. **`[預期結果] 預期結果與驗證標準`**
   - 請明確定義 Pass 或 Fail 的基準條件，不要有模糊空間。
   - 範例：
     ```markdown
     - **[驗證點 1] 登入機制**：輸入指定帳號密碼能成功登入並跳轉至會員首頁。
     - **[驗證點 2] 效能標準**：頁面完整載入的時間必須 **小於 5 秒**。
     ```

### 步驟 2：觸發 AI 自動測試
撰寫完成後，開啟 AI 對話視窗（例如運用 Antigravity 擴充功能），輸入以下指令啟動測試：
> 「請依照 `Test/你的檔案名稱.md` 執行驗收測試，並產生報告。」
（AI 偵測到「執行驗收」、「產生測試報告」等關鍵字即會載入 `autoTestReport` 技能）

### 步驟 3：等待測試與報告產出
- 接收指令後，AI 會指派其內部的 **Browser Subagent** 自動執行瀏覽器操作，並全程錄影。這個過程請在後台等待，避免手動干預。
- 當 Subagent 完成瀏覽器操作後，主 AI 會自動呼叫 `.agent/skills/autoTestReport/scripts/generate_report.exe` 執行檔打包報告。
- 完成後，AI 會回報：「測試已完成，報告已統一歸檔於 reports 目錄下。」

## [預期結果] 預期結果與驗證標準
- **檢視報告**：專案的 `reports/` 目錄下將產生 `Acceptance_Report_*.html` 檔案。PM 或 SA 直接使用網頁瀏覽器雙擊開啟該檔案。
- **報告查核點**：
  1. 報告上方是否顯示正確的測試案例名稱與執行時間。
  2. 報告總結是否明確標示為全自動判定後的 Pass 或 Fail。
  3. 對照 SOP 步驟 1 定義的 `[自動化紀錄點]`，檢查 HTML 報告內是否有附上正確的網頁操作截圖。
- **異常處理**：若執行結果為 Fail 且與預期不符，請檢查是網站存在 Bug（提交 Issue 給開發人員），或是測試案例步驟寫得不夠明確導致 AI 誤判（修改 Markdown 重新測試）。

---

## Word 測試規格 (.docx) 撰寫與排版規範
如果您使用 `browser-test-reporter` 透過 Word (`.docx`) 作為測試載體，請遵守以下統一標準：
1. **核取方塊使用原則**：表格內的「測試結果」欄位請預留空白的 `□通過` 與 `□失敗`，AI 在測試完畢後會自動將結果回填為打勾狀態（`☑`）。
2. **摘要與明細分離排版**：為了保持 Word 版面乾淨整齊，AI **不會**將所有的操作細節跟大型截圖硬塞入表格的儲存格內。
3. **圖文並茂的結尾**：所有長篇的驗證文字、步驟執行狀況以及網頁截圖，會自動排版並**附加在整份文件的最末端**，您可以像是閱讀網頁文章一樣，順暢地滑到最後一頁觀看完整的圖文過程。
